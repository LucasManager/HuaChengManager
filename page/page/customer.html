<!DOCTYPE html>
<html>

<head>
    <base href="<%=basePath%>">
    <title>项目管理</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <link rel="stylesheet" href="../bootstrap-3.3.5-dist/css/bootstrap.css">
    <link rel="stylesheet" href="../style/table.css">
    <link rel="stylesheet" href="../style/components.css">
    <link rel="stylesheet" href="../style/style.min.css">
    <script src="../bootstrap-3.3.5-dist/js/jquery.min.js"></script>
    <script src="../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>
    <link href="../main/css/font-awesome.min.css" rel="stylesheet" type="text/css">
</head>

<body>
    <ol class="breadcrumb">
        <li></li>
        <li></li>
    </ol>
    <div class="panel panel-default width_960  div_margin_center">
        <div class="panel-heading">
            <h3 class="panel-title">客户管理</h3>
        </div>
        <div class="panel-body background_F9F7F6">
            <div class="panel border_364150 width_980  div_margin_center">
                <form id="searchTerms" action="" method="post" class="margin_0">
                    <div class="height_40 background_364150">
                        <div class="height_40 float_left background_293846">
                            <div class="float_left width_300">
                                <input type="text" name="projectNo" class="object_search argin_l_15" placeholder="请输入姓名">
                                <input type="text" name="projectName" class="object_search" placeholder=" 请输入手机号">
                                <input type="submit" class="input_hide" id="searchButtom">
                            </div>
                            <span onclick="$('#searchButtom').click()" class="table_search_submit">&nbsp;<i class="glyphicon glyphicon-search" style="font-size:18px"></i>&nbsp;</span>
                        </div>
                        
                        <span data-toggle="modal" data-target="#changeobj" onclick="addProject();" class=" float_right object_addobject" title="添加项目"><i class="glyphicon glyphicon-plus-sign"></i>添加客户</span>
                    </div>
                    <table class="table table-bordered table-hover table-striped">
                        <thead>
                            <tr>
                                <!-- <th class="check_width">
                                    <span class="pointer" onclick="true_cheked(this)"><input type="checkbox" onclick="$(this).parent().click()"></span>
                                </th> -->
                                <th>姓名</th>
                                <th>手机号</th>
                                <th>地址</th>
                                <th>已提供服务</th>
                                <th colspan="2">编辑操作</th>
                            </tr>
                        </thead>
                        <tbody id="projectContent">
                            <c:forEach items="${users }" var="user">
                                <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                    	西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                             			data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject()" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>

                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject()" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                                 <tr>
                                    <td>张三</td>
                                    <td>15555555555</td>
                                    <td>
                                        西安XX区XX号
                                    </td>
                                    <td><a>查看所有服务<a></td>
                                    <td class="td_width_100">
                                        <!--                                        data-target="#changeobj" -->
                                        <a href="javascript:void(0)" title="修改" data-toggle="modal" data-target="#add_resource"
                                        onclick="findDetailById(${project.iProjectId})"><i class="glyphicon glyphicon-edit "></i></a>
                                        <a href="javascript:void(0)" title="删除" onclick="deleteProject(${project.iProjectId},this)" class="btn-margin_5"><i class="glyphicon glyphicon-trash"></i></a>
                                        
                                    </td>
                                </tr>
                            </c:forEach>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td colspan="6">
                                   <button class="btn btn-primary">上一页</button>
                                   <button class="btn btn-primary">下一页</button>
                                </td>
                            </tr>
                        </tfoot>
                    </table>
                </form>
                <div style="clear:both"></div>
            </div>
        </div>
    </div>
    <!--模态框-->
    <div class="modal fade" id="changeobj" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                            修改项目
                        </h4>
                </div>
                <div class="modal-body">
                    <div>
                        <!--添加表单-->
                        <form role="form" id="project_id" action="">
                            <input hidden="hidden" id="upt_projectId" name="sProjectId">
                            <div class="form-group">
                                <label for="name" class="font-16">*项目编号:</label>
                                <input type="text" class="form-control" id="upt_projectNo" name="sProjectNo" placeholder="请输入项目编号" onkeyup="keyup(this);">
                            </div>
                            <div class="form-group">
                                <label for="name" class="font-16">*项目名称:</label>
                                <input type="text" class="form-control" id="upt_projectName" name="sProjectName" placeholder="请输入项目名称" onkeyup="keyup(this);">
                            </div>
                            <div class="form-group">
                                <label for="object_talk" class="font-16">项目描述:</label>
                                <textarea class="form-control" id="upt_projectDescribe" name="sDescribe" rows="3"></textarea>
                            </div>
                            <div class="form-group add_select_style float_left">
                                <label for="upt_checkService" class="font-16">选择服务器:</label>
                                <select id="upt_checkService" name="server" class="form-control">
                                    <option value="0">未选择</option>
                                    <c:forEach items="${Services }" var="service">
                                        <option value="${service.serverId }">${service.name }</option>
                                    </c:forEach>
                                </select>
                            </div>
                            <div class="form-group add_select_style float_left">
                                <label style="margin-left: 10%;" for="upt_status" class="font-16">项目状态:</label>
                                <select style="margin-left: 10%;" id="upt_status" name="status" class="form-control">
                                    <option value="0">未选择</option>
                                    <option value="1">正常</option>
                                    <option value="2">完结</option>
                                    <option value="3">删除</option>
                                </select>
                            </div>
                            <!-- 添加开始时间 -->
                            <label style="margin-top: 20px;">开始时间：</label>
                            <div class="input-group input-medium date date-picker" data-date="2016-3-16" data-date-format="yyyy/mm/dd" data-date-viewmode="years">
                                <input id="startDate" name="startDate" type="text" class="form-control" readonly> <span class="input-group-btn">
									<button class="btn default" type="button">
										<i class="fa fa-calendar"></i>
									</button>
								</span>
                            </div>
                            <input type="submit" class="input_hide" id="change_obj">
                        </form>
                        <!--添加表单-->
                    </div>
                    <div style="clear: both"></div>
                </div>
                <div class="modal-footer">
                    <button id="form_submit" type="button" class="btn btn-primary" onclick="beforeSubmit();">
                        <!-- $('#change_obj').click(); -->
                        提交添加
                    </button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal -->
        <!--模态框-->
    </div>
    <!--模态框-->
    <div class="modal fade" id="add_resource" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                        &times;
                    </button>
                    <h4 class="modal-title" id="myModalLabel">
                            修改项目
                        </h4>
                </div>
                <div class="modal-body">
                    <div>
                        <!--添加表单-->
                        <form role="form" action="">
                            <div class="form-group">
                                <div class="portlet green-meadow box">
                                    <div class="portlet-title">
                                        <div class="caption">
                                            <i class="fa fa-cogs"></i>所有资源
                                        </div>
                                        <div class="tools">
                                            <a href="javascript:;" class="collapse">
                                            </a>
                                            <a href="#portlet-config" data-toggle="modal" class="config">
                                            </a>
                                            <a href="javascript:;" class="reload">
                                            </a>
                                            <!--<a href="javascript:;" class="remove">
								</a>-->
                                            <!--插件删除按钮-->
                                        </div>
                                    </div>
                                    <div class="portlet-body">
                                        <div id="tree" class="tree-demo">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <!--添加表单-->
                        <div style="clear:both"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" data-dismiss="modal" class="btn btn-primary" id="updateCIBtn">
                        提交添加
                    </button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭
                    </button>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal -->
        <!--模态框-->
    </div>
    <script type="text/javascript">
    var currentProjectId = 0;
    $(document).ready(function() {
        
    });

        
    function findDetailById(projectId) {
   
    }
    //添加项目
    function addProject() {
       
    }

    function deleteProject(projectId, obj) {
        if (confirm("是否确认删除？")) {
            $.ajax({
                type: "POST",
                url: "deleteProjectById.do",
                data: {
                    projectId: projectId
                },
                dataType: "json",
                success: function(data) {
                    if (data.success == "success") {
                        alert("删除成功！");
                        obj.parentNode.parentNode.parentNode.removeChild(obj.parentNode.parentNode);
                    } else {
                        alert("删除失败！");
                    }
                }
            });
        }
    }

    function check_resource(projectId) {
        
    }
    //条件查询
    function searchProjectList() {
        var terms = $("#searchTerms");
        terms.attr("action", "searchProjectList.do");
        $.ajax({
            type: "POST",
            url: "searchProjectList.do",
            data: $("#searchTerms").serialize(),
            dataType: "json",
            success: function(data) {
                var projectList = data.projectList;
                var projectTable = $("#projectContent");
                projectTable.empty();
                for (var i = 0; i < projectList.length; i++) {
                    var appendStr = "";
                    appendStr += "<tr><td><input type='checkbox'></td>";
                    appendStr += "<td>" + projectList[i].sProjectNo + "</td>";
                    appendStr += "<td>" + projectList[i].sProjectName + "</td>";
                    if (projectList[i].status == 1) {
                        appendStr += "<td>正常</td>";
                    } else if (projectList[i].status == 2) {
                        appendStr += "<td>完结</td>";
                    } else {
                        appendStr += "<td>未设置</td>";
                    }
                    appendStr += "<td>" + projectList[i].sDescribe + "</td>";
                    appendStr += "<td class='td_width_100'>";
                    appendStr += "<span class='btn btn-primary btn-margin' data-toggle='modal'  onclick='findDetailById(" + projectList[i].iProjectId + ")'>修改</span>";
                    appendStr += "<span class='btn btn-primary btn-margin' data-toggle='modal' data-target='#add_resource' onclick='check_resource(" + projectList[i].iProjectId + ")'>资源设置</span>";
                    appendStr += "<span class='btn btn-danger btn-margin' onclick='deleteProject()'>删除</span></td></tr>";
                    projectTable.append(appendStr);
                }
            }
        });
    }
    //分页
    function skippage(page) {
        if (page != '${curpage}') {
            $("#pageindex").val(page);
            $("#searchTerms").submit();
        }
    }
    //表单校验
    function beforeSubmit() {
       
    }

    function keyup(o) {
       
    }
    </script>
</body>

</html>
